name: Build dflat linux [tmate]
on: [workflow_dispatch]

jobs:
  build:
    name: Run Script
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Setup tmate session
      uses: mxschmitt/action-tmate@v3
      with:
        limit-access-to-actor: true
        detached: true
    - name: Run assemble script
      run: | 
        chmod +x assemble-linux.sh
        ./assemble-linux.sh
      shell: bash
    - uses: ncipollo/release-action@v1
      with:
        artifacts: d:/a/dflat/dflat/dflat-linux-x64.zip
        tag: "test-${{ github.run_number }}-${{ github.run_attempt }}"
